{"remainingRequest":"/Users/kimnahyeon/git/vue-calendar/node_modules/babel-loader/lib/index.js!/Users/kimnahyeon/git/vue-calendar/node_modules/vuetify/lib/components/VCalendar/modes/stack.js","dependencies":[{"path":"/Users/kimnahyeon/git/vue-calendar/node_modules/vuetify/lib/components/VCalendar/modes/stack.js","mtime":499162500000},{"path":"/Users/kimnahyeon/git/vue-calendar/babel.config.js","mtime":1649295397287},{"path":"/Users/kimnahyeon/git/vue-calendar/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kimnahyeon/git/vue-calendar/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9Vc2Vycy9raW1uYWh5ZW9uL2dpdC92dWUtY2FsZW5kYXIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXkuanMiOwppbXBvcnQgX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIgZnJvbSAiL1VzZXJzL2tpbW5haHllb24vZ2l0L3Z1ZS1jYWxlbmRhci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNvcnQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0IHsgZ2V0T3ZlcmxhcEdyb3VwSGFuZGxlciwgZ2V0VmlzdWFscywgaGFzT3ZlcmxhcCwgZ2V0Tm9ybWFsaXplZFJhbmdlIH0gZnJvbSAnLi9jb21tb24nOwppbXBvcnQgeyBnZXRUaW1lc3RhbXBJZGVudGlmaWVyIH0gZnJvbSAnLi4vdXRpbC90aW1lc3RhbXAnOwp2YXIgRlVMTF9XSURUSCA9IDEwMDsKdmFyIERFRkFVTFRfT0ZGU0VUID0gNTsKdmFyIFdJRFRIX01VTFRJUExJRVIgPSAxLjc7Ci8qKgogKiBWYXJpYXRpb24gb2YgY29sdW1uIG1vZGUgd2hlcmUgZXZlbnRzIGNhbiBiZSBzdGFja2VkLiBUaGUgcHJpb3JpdHkgb2YgdGhpcwogKiBtb2RlIGlzIHRvIHN0YWNrIGV2ZW50cyB0b2dldGhlciB0YWtpbmcgdXAgdGhlIGxlYXN0IGFtb3VudCBvZiBzcGFjZSB3aGlsZQogKiB0cnlpbmcgdG8gZW5zdXJlIHRoZSBjb250ZW50IG9mIHRoZSBldmVudCBpcyBhbHdheXMgdmlzaWJsZSBhcyB3ZWxsIGFzIGl0cwogKiBzdGFydCBhbmQgZW5kLiBBIHNpYmxpbmcgY29sdW1uIGhhcyBpbnRlcnNlY3RpbmcgZXZlbnQgY29udGVudCBhbmQgbXVzdCBiZQogKiBwbGFjZWQgYmVzaWRlIGVhY2ggb3RoZXIuIE5vbi1zaWJsaW5nIGNvbHVtbnMgYXJlIG9mZnNldCBieSA1JSBmcm9tIHRoZQogKiBwcmV2aW91cyBjb2x1bW4uIFRoZSB3aWR0aCBpcyBzY2FsZWQgYnkgMS43IHNvIHRoZSBldmVudHMgb3ZlcmxhcCBhbmQKICogd2hpdGVzcGFjZSBpcyByZWR1Y2VkLiBJZiB0aGVyZSBpcyBhIGhvbGUgaW4gY29sdW1ucyB0aGUgZXZlbnQgd2lkdGggaXMKICogc2NhbGVkIHVwIHNvIGl0IGludGVyc2VjdHMgd2l0aCB0aGUgbmV4dCBjb2x1bW4uIFRoZSBjb2x1bW5zIGhhdmUgZXF1YWwKICogd2lkdGggaW4gdGhlIHNwYWNlIHRoZXkgYXJlIGdpdmVuLiBJZiB0aGUgZXZlbnQgZG9lc24ndCBoYXZlIGFueSB0byB0aGUKICogcmlnaHQgb2YgaXQgdGhhdCBpbnRlcnNlY3Qgd2l0aCBpdCdzIGNvbnRlbnQgaXQncyByaWdodCBzaWRlIGlzIGV4dGVuZGVkCiAqIHRvIHRoZSByaWdodCBzaWRlLgogKi8KCmV4cG9ydCB2YXIgc3RhY2sgPSBmdW5jdGlvbiBzdGFjayhldmVudHMsIGZpcnN0V2Vla2RheSwgb3ZlcmxhcFRocmVzaG9sZCkgewogIHZhciBoYW5kbGVyID0gZ2V0T3ZlcmxhcEdyb3VwSGFuZGxlcihmaXJzdFdlZWtkYXkpOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbWF4LXN0YXRlbWVudHMKCiAgcmV0dXJuIGZ1bmN0aW9uIChkYXksIGRheUV2ZW50cywgdGltZWQsIHJlc2V0KSB7CiAgICBpZiAoIXRpbWVkKSB7CiAgICAgIHJldHVybiBoYW5kbGVyLmdldFZpc3VhbHMoZGF5LCBkYXlFdmVudHMsIHRpbWVkLCByZXNldCk7CiAgICB9CgogICAgdmFyIGRheVN0YXJ0ID0gZ2V0VGltZXN0YW1wSWRlbnRpZmllcihkYXkpOwogICAgdmFyIHZpc3VhbHMgPSBnZXRWaXN1YWxzKGRheUV2ZW50cywgZGF5U3RhcnQpOwogICAgdmFyIGdyb3VwcyA9IGdldEdyb3Vwcyh2aXN1YWxzLCBkYXlTdGFydCk7CgogICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGdyb3VwcyksCiAgICAgICAgX3N0ZXA7CgogICAgdHJ5IHsKICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICB2YXIgZ3JvdXAgPSBfc3RlcC52YWx1ZTsKICAgICAgICB2YXIgbm9kZXMgPSBbXTsKCiAgICAgICAgdmFyIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihncm91cC52aXN1YWxzKSwKICAgICAgICAgICAgX3N0ZXAyOwoKICAgICAgICB0cnkgewogICAgICAgICAgZm9yIChfaXRlcmF0b3IyLnMoKTsgIShfc3RlcDIgPSBfaXRlcmF0b3IyLm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgdmFyIHZpc3VhbCA9IF9zdGVwMi52YWx1ZTsKICAgICAgICAgICAgdmFyIGNoaWxkID0gZ2V0Tm9kZSh2aXN1YWwsIGRheVN0YXJ0KTsKICAgICAgICAgICAgdmFyIGluZGV4ID0gZ2V0TmV4dEluZGV4KGNoaWxkLCBub2Rlcyk7CgogICAgICAgICAgICBpZiAoaW5kZXggPT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgdmFyIHBhcmVudCA9IGdldFBhcmVudChjaGlsZCwgbm9kZXMpOwoKICAgICAgICAgICAgICBpZiAocGFyZW50KSB7CiAgICAgICAgICAgICAgICBjaGlsZC5wYXJlbnQgPSBwYXJlbnQ7CiAgICAgICAgICAgICAgICBjaGlsZC5zaWJsaW5nID0gaGFzT3ZlcmxhcChjaGlsZC5zdGFydCwgY2hpbGQuZW5kLCBwYXJlbnQuc3RhcnQsIGFkZFRpbWUocGFyZW50LnN0YXJ0LCBvdmVybGFwVGhyZXNob2xkKSk7CiAgICAgICAgICAgICAgICBjaGlsZC5pbmRleCA9IHBhcmVudC5pbmRleCArIDE7CiAgICAgICAgICAgICAgICBwYXJlbnQuY2hpbGRyZW4ucHVzaChjaGlsZCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHZhciBfZ2V0T3ZlcmxhcHBpbmdSYW5nZSA9IGdldE92ZXJsYXBwaW5nUmFuZ2UoY2hpbGQsIG5vZGVzLCBpbmRleCAtIDEsIGluZGV4IC0gMSksCiAgICAgICAgICAgICAgICAgIF9nZXRPdmVybGFwcGluZ1JhbmdlMiA9IF9zbGljZWRUb0FycmF5KF9nZXRPdmVybGFwcGluZ1JhbmdlLCAxKSwKICAgICAgICAgICAgICAgICAgX3BhcmVudCA9IF9nZXRPdmVybGFwcGluZ1JhbmdlMlswXTsKCiAgICAgICAgICAgICAgdmFyIGNoaWxkcmVuID0gZ2V0T3ZlcmxhcHBpbmdSYW5nZShjaGlsZCwgbm9kZXMsIGluZGV4ICsgMSwgaW5kZXggKyBub2Rlcy5sZW5ndGgsIHRydWUpOwogICAgICAgICAgICAgIGNoaWxkLmNoaWxkcmVuID0gY2hpbGRyZW47CiAgICAgICAgICAgICAgY2hpbGQuaW5kZXggPSBpbmRleDsKCiAgICAgICAgICAgICAgaWYgKF9wYXJlbnQpIHsKICAgICAgICAgICAgICAgIGNoaWxkLnBhcmVudCA9IF9wYXJlbnQ7CiAgICAgICAgICAgICAgICBjaGlsZC5zaWJsaW5nID0gaGFzT3ZlcmxhcChjaGlsZC5zdGFydCwgY2hpbGQuZW5kLCBfcGFyZW50LnN0YXJ0LCBhZGRUaW1lKF9wYXJlbnQuc3RhcnQsIG92ZXJsYXBUaHJlc2hvbGQpKTsKCiAgICAgICAgICAgICAgICBfcGFyZW50LmNoaWxkcmVuLnB1c2goY2hpbGQpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgdmFyIF9pdGVyYXRvcjMgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihjaGlsZHJlbiksCiAgICAgICAgICAgICAgICAgIF9zdGVwMzsKCiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yMy5zKCk7ICEoX3N0ZXAzID0gX2l0ZXJhdG9yMy5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgICAgIHZhciBncmFuZCA9IF9zdGVwMy52YWx1ZTsKCiAgICAgICAgICAgICAgICAgIGlmIChncmFuZC5wYXJlbnQgPT09IF9wYXJlbnQpIHsKICAgICAgICAgICAgICAgICAgICBncmFuZC5wYXJlbnQgPSBjaGlsZDsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgdmFyIGdyYW5kTmV4dCA9IGdyYW5kLmluZGV4IC0gY2hpbGQuaW5kZXggPD0gMTsKCiAgICAgICAgICAgICAgICAgIGlmIChncmFuZE5leHQgJiYgY2hpbGQuc2libGluZyAmJiBoYXNPdmVybGFwKGNoaWxkLnN0YXJ0LCBhZGRUaW1lKGNoaWxkLnN0YXJ0LCBvdmVybGFwVGhyZXNob2xkKSwgZ3JhbmQuc3RhcnQsIGdyYW5kLmVuZCkpIHsKICAgICAgICAgICAgICAgICAgICBncmFuZC5zaWJsaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgX2l0ZXJhdG9yMy5lKGVycik7CiAgICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgIF9pdGVyYXRvcjMuZigpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgbm9kZXMucHVzaChjaGlsZCk7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICBfaXRlcmF0b3IyLmUoZXJyKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgX2l0ZXJhdG9yMi5mKCk7CiAgICAgICAgfQoKICAgICAgICBjYWxjdWxhdGVCb3VuZHMobm9kZXMsIG92ZXJsYXBUaHJlc2hvbGQpOwogICAgICB9CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgIH0gZmluYWxseSB7CiAgICAgIF9pdGVyYXRvci5mKCk7CiAgICB9CgogICAgdmlzdWFscy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgIHJldHVybiBhLmxlZnQgLSBiLmxlZnQgfHwgYS5ldmVudC5zdGFydFRpbWVzdGFtcElkZW50aWZpZXIgLSBiLmV2ZW50LnN0YXJ0VGltZXN0YW1wSWRlbnRpZmllcjsKICAgIH0pOwogICAgcmV0dXJuIHZpc3VhbHM7CiAgfTsKfTsKCmZ1bmN0aW9uIGNhbGN1bGF0ZUJvdW5kcyhub2Rlcywgb3ZlcmxhcFRocmVzaG9sZCkgewogIHZhciBfaXRlcmF0b3I0ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobm9kZXMpLAogICAgICBfc3RlcDQ7CgogIHRyeSB7CiAgICBmb3IgKF9pdGVyYXRvcjQucygpOyAhKF9zdGVwNCA9IF9pdGVyYXRvcjQubigpKS5kb25lOykgewogICAgICB2YXIgbm9kZSA9IF9zdGVwNC52YWx1ZTsKICAgICAgdmFyIHZpc3VhbCA9IG5vZGUudmlzdWFsLAogICAgICAgICAgcGFyZW50ID0gbm9kZS5wYXJlbnQ7CiAgICAgIHZhciBjb2x1bW5zID0gZ2V0TWF4Q2hpbGRJbmRleChub2RlKSArIDE7CiAgICAgIHZhciBzcGFjZUxlZnQgPSBwYXJlbnQgPyBwYXJlbnQudmlzdWFsLmxlZnQgOiAwOwogICAgICB2YXIgc3BhY2VXaWR0aCA9IEZVTExfV0lEVEggLSBzcGFjZUxlZnQ7CiAgICAgIHZhciBvZmZzZXQgPSBNYXRoLm1pbihERUZBVUxUX09GRlNFVCwgRlVMTF9XSURUSCAvIGNvbHVtbnMpOwogICAgICB2YXIgY29sdW1uV2lkdGhNdWx0aXBsaWVyID0gZ2V0Q29sdW1uV2lkdGhNdWx0aXBsaWVyKG5vZGUsIG5vZGVzKTsKICAgICAgdmFyIGNvbHVtbk9mZnNldCA9IHNwYWNlV2lkdGggLyAoY29sdW1ucyAtIG5vZGUuaW5kZXggKyAxKTsKICAgICAgdmFyIGNvbHVtbldpZHRoID0gc3BhY2VXaWR0aCAvIChjb2x1bW5zIC0gbm9kZS5pbmRleCArIChub2RlLnNpYmxpbmcgPyAxIDogMCkpICogY29sdW1uV2lkdGhNdWx0aXBsaWVyOwoKICAgICAgaWYgKHBhcmVudCkgewogICAgICAgIHZpc3VhbC5sZWZ0ID0gbm9kZS5zaWJsaW5nID8gc3BhY2VMZWZ0ICsgY29sdW1uT2Zmc2V0IDogc3BhY2VMZWZ0ICsgb2Zmc2V0OwogICAgICB9CgogICAgICB2aXN1YWwud2lkdGggPSBoYXNGdWxsV2lkdGgobm9kZSwgbm9kZXMsIG92ZXJsYXBUaHJlc2hvbGQpID8gRlVMTF9XSURUSCAtIHZpc3VhbC5sZWZ0IDogTWF0aC5taW4oRlVMTF9XSURUSCAtIHZpc3VhbC5sZWZ0LCBjb2x1bW5XaWR0aCAqIFdJRFRIX01VTFRJUExJRVIpOwogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2l0ZXJhdG9yNC5lKGVycik7CiAgfSBmaW5hbGx5IHsKICAgIF9pdGVyYXRvcjQuZigpOwogIH0KfQoKZnVuY3Rpb24gZ2V0Q29sdW1uV2lkdGhNdWx0aXBsaWVyKG5vZGUsIG5vZGVzKSB7CiAgaWYgKCFub2RlLmNoaWxkcmVuLmxlbmd0aCkgewogICAgcmV0dXJuIDE7CiAgfQoKICB2YXIgbWF4Q29sdW1uID0gbm9kZS5pbmRleCArIG5vZGVzLmxlbmd0aDsKICB2YXIgbWluQ29sdW1uID0gbm9kZS5jaGlsZHJlbi5yZWR1Y2UoZnVuY3Rpb24gKG1pbiwgYykgewogICAgcmV0dXJuIE1hdGgubWluKG1pbiwgYy5pbmRleCk7CiAgfSwgbWF4Q29sdW1uKTsKICByZXR1cm4gbWluQ29sdW1uIC0gbm9kZS5pbmRleDsKfQoKZnVuY3Rpb24gZ2V0T3ZlcmxhcHBpbmdJbmRpY2VzKG5vZGUsIG5vZGVzKSB7CiAgdmFyIGluZGljZXMgPSBbXTsKCiAgdmFyIF9pdGVyYXRvcjUgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihub2RlcyksCiAgICAgIF9zdGVwNTsKCiAgdHJ5IHsKICAgIGZvciAoX2l0ZXJhdG9yNS5zKCk7ICEoX3N0ZXA1ID0gX2l0ZXJhdG9yNS5uKCkpLmRvbmU7KSB7CiAgICAgIHZhciBvdGhlciA9IF9zdGVwNS52YWx1ZTsKCiAgICAgIGlmIChoYXNPdmVybGFwKG5vZGUuc3RhcnQsIG5vZGUuZW5kLCBvdGhlci5zdGFydCwgb3RoZXIuZW5kKSkgewogICAgICAgIGluZGljZXMucHVzaChvdGhlci5pbmRleCk7CiAgICAgIH0KICAgIH0KICB9IGNhdGNoIChlcnIpIHsKICAgIF9pdGVyYXRvcjUuZShlcnIpOwogIH0gZmluYWxseSB7CiAgICBfaXRlcmF0b3I1LmYoKTsKICB9CgogIHJldHVybiBpbmRpY2VzOwp9CgpmdW5jdGlvbiBnZXROZXh0SW5kZXgobm9kZSwgbm9kZXMpIHsKICB2YXIgaW5kaWNlcyA9IGdldE92ZXJsYXBwaW5nSW5kaWNlcyhub2RlLCBub2Rlcyk7CiAgaW5kaWNlcy5zb3J0KCk7CgogIGZvciAodmFyIGkgPSAwOyBpIDwgaW5kaWNlcy5sZW5ndGg7IGkrKykgewogICAgaWYgKGkgPCBpbmRpY2VzW2ldKSB7CiAgICAgIHJldHVybiBpOwogICAgfQogIH0KCiAgcmV0dXJuIGZhbHNlOwp9CgpmdW5jdGlvbiBnZXRPdmVybGFwcGluZ1JhbmdlKG5vZGUsIG5vZGVzLCBpbmRleE1pbiwgaW5kZXhNYXgpIHsKICB2YXIgcmV0dXJuRmlyc3RDb2x1bW4gPSBhcmd1bWVudHMubGVuZ3RoID4gNCAmJiBhcmd1bWVudHNbNF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s0XSA6IGZhbHNlOwogIHZhciBvdmVybGFwcGluZyA9IFtdOwoKICB2YXIgX2l0ZXJhdG9yNiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG5vZGVzKSwKICAgICAgX3N0ZXA2OwoKICB0cnkgewogICAgZm9yIChfaXRlcmF0b3I2LnMoKTsgIShfc3RlcDYgPSBfaXRlcmF0b3I2Lm4oKSkuZG9uZTspIHsKICAgICAgdmFyIG90aGVyID0gX3N0ZXA2LnZhbHVlOwoKICAgICAgaWYgKG90aGVyLmluZGV4ID49IGluZGV4TWluICYmIG90aGVyLmluZGV4IDw9IGluZGV4TWF4ICYmIGhhc092ZXJsYXAobm9kZS5zdGFydCwgbm9kZS5lbmQsIG90aGVyLnN0YXJ0LCBvdGhlci5lbmQpKSB7CiAgICAgICAgb3ZlcmxhcHBpbmcucHVzaChvdGhlcik7CiAgICAgIH0KICAgIH0KICB9IGNhdGNoIChlcnIpIHsKICAgIF9pdGVyYXRvcjYuZShlcnIpOwogIH0gZmluYWxseSB7CiAgICBfaXRlcmF0b3I2LmYoKTsKICB9CgogIGlmIChyZXR1cm5GaXJzdENvbHVtbiAmJiBvdmVybGFwcGluZy5sZW5ndGggPiAwKSB7CiAgICB2YXIgZmlyc3QgPSBvdmVybGFwcGluZy5yZWR1Y2UoZnVuY3Rpb24gKG1pbiwgbikgewogICAgICByZXR1cm4gTWF0aC5taW4obWluLCBuLmluZGV4KTsKICAgIH0sIG92ZXJsYXBwaW5nWzBdLmluZGV4KTsKICAgIHJldHVybiBvdmVybGFwcGluZy5maWx0ZXIoZnVuY3Rpb24gKG4pIHsKICAgICAgcmV0dXJuIG4uaW5kZXggPT09IGZpcnN0OwogICAgfSk7CiAgfQoKICByZXR1cm4gb3ZlcmxhcHBpbmc7Cn0KCmZ1bmN0aW9uIGdldFBhcmVudChub2RlLCBub2RlcykgewogIHZhciBwYXJlbnQgPSBudWxsOwoKICB2YXIgX2l0ZXJhdG9yNyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG5vZGVzKSwKICAgICAgX3N0ZXA3OwoKICB0cnkgewogICAgZm9yIChfaXRlcmF0b3I3LnMoKTsgIShfc3RlcDcgPSBfaXRlcmF0b3I3Lm4oKSkuZG9uZTspIHsKICAgICAgdmFyIG90aGVyID0gX3N0ZXA3LnZhbHVlOwoKICAgICAgaWYgKGhhc092ZXJsYXAobm9kZS5zdGFydCwgbm9kZS5lbmQsIG90aGVyLnN0YXJ0LCBvdGhlci5lbmQpICYmIChwYXJlbnQgPT09IG51bGwgfHwgb3RoZXIuaW5kZXggPiBwYXJlbnQuaW5kZXgpKSB7CiAgICAgICAgcGFyZW50ID0gb3RoZXI7CiAgICAgIH0KICAgIH0KICB9IGNhdGNoIChlcnIpIHsKICAgIF9pdGVyYXRvcjcuZShlcnIpOwogIH0gZmluYWxseSB7CiAgICBfaXRlcmF0b3I3LmYoKTsKICB9CgogIHJldHVybiBwYXJlbnQ7Cn0KCmZ1bmN0aW9uIGhhc0Z1bGxXaWR0aChub2RlLCBub2Rlcywgb3ZlcmxhcFRocmVzaG9sZCkgewogIHZhciBfaXRlcmF0b3I4ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobm9kZXMpLAogICAgICBfc3RlcDg7CgogIHRyeSB7CiAgICBmb3IgKF9pdGVyYXRvcjgucygpOyAhKF9zdGVwOCA9IF9pdGVyYXRvcjgubigpKS5kb25lOykgewogICAgICB2YXIgb3RoZXIgPSBfc3RlcDgudmFsdWU7CgogICAgICBpZiAob3RoZXIgIT09IG5vZGUgJiYgb3RoZXIuaW5kZXggPiBub2RlLmluZGV4ICYmIGhhc092ZXJsYXAobm9kZS5zdGFydCwgYWRkVGltZShub2RlLnN0YXJ0LCBvdmVybGFwVGhyZXNob2xkKSwgb3RoZXIuc3RhcnQsIG90aGVyLmVuZCkpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0KICB9IGNhdGNoIChlcnIpIHsKICAgIF9pdGVyYXRvcjguZShlcnIpOwogIH0gZmluYWxseSB7CiAgICBfaXRlcmF0b3I4LmYoKTsKICB9CgogIHJldHVybiB0cnVlOwp9CgpmdW5jdGlvbiBnZXRHcm91cHModmlzdWFscywgZGF5U3RhcnQpIHsKICB2YXIgZ3JvdXBzID0gW107CgogIHZhciBfaXRlcmF0b3I5ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodmlzdWFscyksCiAgICAgIF9zdGVwOTsKCiAgdHJ5IHsKICAgIGZvciAoX2l0ZXJhdG9yOS5zKCk7ICEoX3N0ZXA5ID0gX2l0ZXJhdG9yOS5uKCkpLmRvbmU7KSB7CiAgICAgIHZhciB2aXN1YWwgPSBfc3RlcDkudmFsdWU7CgogICAgICB2YXIgX2dldE5vcm1hbGl6ZWRSYW5nZSA9IGdldE5vcm1hbGl6ZWRSYW5nZSh2aXN1YWwuZXZlbnQsIGRheVN0YXJ0KSwKICAgICAgICAgIF9nZXROb3JtYWxpemVkUmFuZ2UyID0gX3NsaWNlZFRvQXJyYXkoX2dldE5vcm1hbGl6ZWRSYW5nZSwgMiksCiAgICAgICAgICBzdGFydCA9IF9nZXROb3JtYWxpemVkUmFuZ2UyWzBdLAogICAgICAgICAgZW5kID0gX2dldE5vcm1hbGl6ZWRSYW5nZTJbMV07CgogICAgICB2YXIgYWRkZWQgPSBmYWxzZTsKCiAgICAgIHZhciBfaXRlcmF0b3IxMCA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGdyb3VwcyksCiAgICAgICAgICBfc3RlcDEwOwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjEwLnMoKTsgIShfc3RlcDEwID0gX2l0ZXJhdG9yMTAubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGdyb3VwID0gX3N0ZXAxMC52YWx1ZTsKCiAgICAgICAgICBpZiAoaGFzT3ZlcmxhcChzdGFydCwgZW5kLCBncm91cC5zdGFydCwgZ3JvdXAuZW5kKSkgewogICAgICAgICAgICBncm91cC52aXN1YWxzLnB1c2godmlzdWFsKTsKICAgICAgICAgICAgZ3JvdXAuZW5kID0gTWF0aC5tYXgoZ3JvdXAuZW5kLCBlbmQpOwogICAgICAgICAgICBhZGRlZCA9IHRydWU7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yMTAuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjEwLmYoKTsKICAgICAgfQoKICAgICAgaWYgKCFhZGRlZCkgewogICAgICAgIGdyb3Vwcy5wdXNoKHsKICAgICAgICAgIHN0YXJ0OiBzdGFydCwKICAgICAgICAgIGVuZDogZW5kLAogICAgICAgICAgdmlzdWFsczogW3Zpc3VhbF0KICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2l0ZXJhdG9yOS5lKGVycik7CiAgfSBmaW5hbGx5IHsKICAgIF9pdGVyYXRvcjkuZigpOwogIH0KCiAgcmV0dXJuIGdyb3VwczsKfQoKZnVuY3Rpb24gZ2V0Tm9kZSh2aXN1YWwsIGRheVN0YXJ0KSB7CiAgdmFyIF9nZXROb3JtYWxpemVkUmFuZ2UzID0gZ2V0Tm9ybWFsaXplZFJhbmdlKHZpc3VhbC5ldmVudCwgZGF5U3RhcnQpLAogICAgICBfZ2V0Tm9ybWFsaXplZFJhbmdlNCA9IF9zbGljZWRUb0FycmF5KF9nZXROb3JtYWxpemVkUmFuZ2UzLCAyKSwKICAgICAgc3RhcnQgPSBfZ2V0Tm9ybWFsaXplZFJhbmdlNFswXSwKICAgICAgZW5kID0gX2dldE5vcm1hbGl6ZWRSYW5nZTRbMV07CgogIHJldHVybiB7CiAgICBwYXJlbnQ6IG51bGwsCiAgICBzaWJsaW5nOiB0cnVlLAogICAgaW5kZXg6IDAsCiAgICB2aXN1YWw6IHZpc3VhbCwKICAgIHN0YXJ0OiBzdGFydCwKICAgIGVuZDogZW5kLAogICAgY2hpbGRyZW46IFtdCiAgfTsKfQoKZnVuY3Rpb24gZ2V0TWF4Q2hpbGRJbmRleChub2RlKSB7CiAgdmFyIG1heCA9IG5vZGUuaW5kZXg7CgogIHZhciBfaXRlcmF0b3IxMSA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG5vZGUuY2hpbGRyZW4pLAogICAgICBfc3RlcDExOwoKICB0cnkgewogICAgZm9yIChfaXRlcmF0b3IxMS5zKCk7ICEoX3N0ZXAxMSA9IF9pdGVyYXRvcjExLm4oKSkuZG9uZTspIHsKICAgICAgdmFyIGNoaWxkID0gX3N0ZXAxMS52YWx1ZTsKICAgICAgdmFyIGNoaWxkTWF4ID0gZ2V0TWF4Q2hpbGRJbmRleChjaGlsZCk7CgogICAgICBpZiAoY2hpbGRNYXggPiBtYXgpIHsKICAgICAgICBtYXggPSBjaGlsZE1heDsKICAgICAgfQogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2l0ZXJhdG9yMTEuZShlcnIpOwogIH0gZmluYWxseSB7CiAgICBfaXRlcmF0b3IxMS5mKCk7CiAgfQoKICByZXR1cm4gbWF4Owp9CgpmdW5jdGlvbiBhZGRUaW1lKGlkZW50aWZpZXIsIG1pbnV0ZXMpIHsKICB2YXIgcmVtb3ZlTWludXRlcyA9IGlkZW50aWZpZXIgJSAxMDA7CiAgdmFyIHRvdGFsTWludXRlcyA9IHJlbW92ZU1pbnV0ZXMgKyBtaW51dGVzOwogIHZhciBhZGRIb3VycyA9IE1hdGguZmxvb3IodG90YWxNaW51dGVzIC8gNjApOwogIHZhciBhZGRNaW51dGVzID0gdG90YWxNaW51dGVzICUgNjA7CiAgcmV0dXJuIGlkZW50aWZpZXIgLSByZW1vdmVNaW51dGVzICsgYWRkSG91cnMgKiAxMDAgKyBhZGRNaW51dGVzOwp9"},{"version":3,"mappings":"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","names":["getOverlapGroupHandler","getVisuals","hasOverlap","getNormalizedRange","getTimestampIdentifier","FULL_WIDTH","DEFAULT_OFFSET","WIDTH_MULTIPLIER","stack","events","firstWeekday","overlapThreshold","handler","day","dayEvents","timed","reset","dayStart","visuals","groups","getGroups","group","nodes","visual","child","getNode","index","getNextIndex","parent","getParent","sibling","start","end","addTime","children","push","getOverlappingRange","length","grand","grandNext","calculateBounds","sort","a","b","left","event","startTimestampIdentifier","node","columns","getMaxChildIndex","spaceLeft","spaceWidth","offset","Math","min","columnWidthMultiplier","getColumnWidthMultiplier","columnOffset","columnWidth","width","hasFullWidth","maxColumn","minColumn","reduce","c","getOverlappingIndices","indices","other","i","indexMin","indexMax","returnFirstColumn","overlapping","first","n","filter","added","max","childMax","identifier","minutes","removeMinutes","totalMinutes","addHours","floor","addMinutes"],"sourceRoot":"","sources":["../../../../src/components/VCalendar/modes/stack.ts"],"sourcesContent":["import { CalendarEventOverlapMode, CalendarEventVisual } from 'vuetify/types'\nimport { getOverlapGroupHandler, getVisuals, hasOverlap, getNormalizedRange } from './common'\nimport { getTimestampIdentifier } from '../util/timestamp'\n\ninterface Group {\n  start: number\n  end: number\n  visuals: CalendarEventVisual[]\n}\n\ninterface Node {\n  parent: Node | null\n  sibling: boolean\n  index: number\n  visual: CalendarEventVisual\n  start: number\n  end: number\n  children: Node[]\n}\n\nconst FULL_WIDTH = 100\n\nconst DEFAULT_OFFSET = 5\n\nconst WIDTH_MULTIPLIER = 1.7\n\n/**\n * Variation of column mode where events can be stacked. The priority of this\n * mode is to stack events together taking up the least amount of space while\n * trying to ensure the content of the event is always visible as well as its\n * start and end. A sibling column has intersecting event content and must be\n * placed beside each other. Non-sibling columns are offset by 5% from the\n * previous column. The width is scaled by 1.7 so the events overlap and\n * whitespace is reduced. If there is a hole in columns the event width is\n * scaled up so it intersects with the next column. The columns have equal\n * width in the space they are given. If the event doesn't have any to the\n * right of it that intersect with it's content it's right side is extended\n * to the right side.\n */\n\nexport const stack: CalendarEventOverlapMode = (events, firstWeekday, overlapThreshold) => {\n  const handler = getOverlapGroupHandler(firstWeekday)\n\n  // eslint-disable-next-line max-statements\n  return (day, dayEvents, timed, reset) => {\n    if (!timed) {\n      return handler.getVisuals(day, dayEvents, timed, reset)\n    }\n\n    const dayStart = getTimestampIdentifier(day)\n    const visuals = getVisuals(dayEvents, dayStart)\n    const groups = getGroups(visuals, dayStart)\n\n    for (const group of groups) {\n      const nodes: Node[] = []\n\n      for (const visual of group.visuals) {\n        const child = getNode(visual, dayStart)\n        const index = getNextIndex(child, nodes)\n\n        if (index === false) {\n          const parent = getParent(child, nodes)\n          if (parent) {\n            child.parent = parent\n            child.sibling = hasOverlap(child.start, child.end, parent.start, addTime(parent.start, overlapThreshold))\n            child.index = parent.index + 1\n            parent.children.push(child)\n          }\n        } else {\n          const [parent] = getOverlappingRange(child, nodes, index - 1, index - 1)\n          const children = getOverlappingRange(child, nodes, index + 1, index + nodes.length, true)\n\n          child.children = children\n          child.index = index\n\n          if (parent) {\n            child.parent = parent\n            child.sibling = hasOverlap(child.start, child.end, parent.start, addTime(parent.start, overlapThreshold))\n            parent.children.push(child)\n          }\n\n          for (const grand of children) {\n            if (grand.parent === parent) {\n              grand.parent = child\n            }\n\n            const grandNext = grand.index - child.index <= 1\n            if (grandNext && child.sibling &&\n              hasOverlap(child.start, addTime(child.start, overlapThreshold), grand.start, grand.end)) {\n              grand.sibling = true\n            }\n          }\n        }\n\n        nodes.push(child)\n      }\n\n      calculateBounds(nodes, overlapThreshold)\n    }\n\n    visuals.sort((a, b) => (a.left - b.left) || (a.event.startTimestampIdentifier - b.event.startTimestampIdentifier))\n\n    return visuals\n  }\n}\n\nfunction calculateBounds (nodes: Node[], overlapThreshold: number) {\n  for (const node of nodes) {\n    const { visual, parent } = node\n    const columns = getMaxChildIndex(node) + 1\n    const spaceLeft = parent ? parent.visual.left : 0\n    const spaceWidth = FULL_WIDTH - spaceLeft\n    const offset = Math.min(DEFAULT_OFFSET, FULL_WIDTH / columns)\n    const columnWidthMultiplier = getColumnWidthMultiplier(node, nodes)\n    const columnOffset = spaceWidth / (columns - node.index + 1)\n    const columnWidth = spaceWidth / (columns - node.index + (node.sibling ? 1 : 0)) * columnWidthMultiplier\n\n    if (parent) {\n      visual.left = node.sibling\n        ? spaceLeft + columnOffset\n        : spaceLeft + offset\n    }\n\n    visual.width = hasFullWidth(node, nodes, overlapThreshold)\n      ? FULL_WIDTH - visual.left\n      : Math.min(FULL_WIDTH - visual.left, columnWidth * WIDTH_MULTIPLIER)\n  }\n}\n\nfunction getColumnWidthMultiplier (node: Node, nodes: Node[]): number {\n  if (!node.children.length) {\n    return 1\n  }\n\n  const maxColumn = node.index + nodes.length\n  const minColumn = node.children.reduce((min, c) => Math.min(min, c.index), maxColumn)\n\n  return minColumn - node.index\n}\n\nfunction getOverlappingIndices (node: Node, nodes: Node[]): number[] {\n  const indices: number[] = []\n  for (const other of nodes) {\n    if (hasOverlap(node.start, node.end, other.start, other.end)) {\n      indices.push(other.index)\n    }\n  }\n  return indices\n}\n\nfunction getNextIndex (node: Node, nodes: Node[]): number | false {\n  const indices = getOverlappingIndices(node, nodes)\n  indices.sort()\n\n  for (let i = 0; i < indices.length; i++) {\n    if (i < indices[i]) {\n      return i\n    }\n  }\n  return false\n}\n\nfunction getOverlappingRange (node: Node, nodes: Node[], indexMin: number, indexMax: number, returnFirstColumn = false): Node[] {\n  const overlapping: Node[] = []\n  for (const other of nodes) {\n    if (other.index >= indexMin && other.index <= indexMax && hasOverlap(node.start, node.end, other.start, other.end)) {\n      overlapping.push(other)\n    }\n  }\n  if (returnFirstColumn && overlapping.length > 0) {\n    const first = overlapping.reduce((min, n) => Math.min(min, n.index), overlapping[0].index)\n    return overlapping.filter(n => n.index === first)\n  }\n  return overlapping\n}\n\nfunction getParent (node: Node, nodes: Node[]): Node | null {\n  let parent: Node | null = null\n  for (const other of nodes) {\n    if (hasOverlap(node.start, node.end, other.start, other.end) && (parent === null || other.index > parent.index)) {\n      parent = other\n    }\n  }\n  return parent\n}\n\nfunction hasFullWidth (node: Node, nodes: Node[], overlapThreshold: number): boolean {\n  for (const other of nodes) {\n    if (other !== node &&\n      other.index > node.index &&\n      hasOverlap(node.start, addTime(node.start, overlapThreshold), other.start, other.end)) {\n      return false\n    }\n  }\n\n  return true\n}\n\nfunction getGroups (visuals: CalendarEventVisual[], dayStart: number): Group[] {\n  const groups: Group[] = []\n\n  for (const visual of visuals) {\n    const [start, end] = getNormalizedRange(visual.event, dayStart)\n    let added = false\n\n    for (const group of groups) {\n      if (hasOverlap(start, end, group.start, group.end)) {\n        group.visuals.push(visual)\n        group.end = Math.max(group.end, end)\n        added = true\n        break\n      }\n    }\n\n    if (!added) {\n      groups.push({ start, end, visuals: [visual] })\n    }\n  }\n\n  return groups\n}\n\nfunction getNode (visual: CalendarEventVisual, dayStart: number): Node {\n  const [start, end] = getNormalizedRange(visual.event, dayStart)\n\n  return {\n    parent: null,\n    sibling: true,\n    index: 0,\n    visual,\n    start,\n    end,\n    children: [],\n  }\n}\n\nfunction getMaxChildIndex (node: Node): number {\n  let max = node.index\n  for (const child of node.children) {\n    const childMax = getMaxChildIndex(child)\n    if (childMax > max) {\n      max = childMax\n    }\n  }\n  return max\n}\n\nfunction addTime (identifier: number, minutes: number): number {\n  const removeMinutes = identifier % 100\n  const totalMinutes = removeMinutes + minutes\n  const addHours = Math.floor(totalMinutes / 60)\n  const addMinutes = totalMinutes % 60\n\n  return identifier - removeMinutes + addHours * 100 + addMinutes\n}\n"]}]}